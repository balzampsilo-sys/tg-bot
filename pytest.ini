[pytest]
# Pytest конфигурация

# Папка с тестами
testpaths = tests

# Паттерн для поиска тестовых файлов
python_files = test_*.py

# Паттерн для поиска тестовых классов
python_classes = Test*

# Паттерн для поиска тестовых функций
python_functions = test_*

# Режим asyncio (автоматический для pytest-asyncio >= 0.21)
asyncio_mode = auto

# Опции для вывода
addopts = 
    # Подробный вывод
    -v
    # Строгая проверка маркеров
    --strict-markers
    --strict-config
    # Короткий traceback
    --tb=short
    # Coverage
    --cov=.
    --cov-report=term-missing:skip-covered
    --cov-report=html
    --cov-report=xml
    # Отключаем предупреждения
    -p no:warnings
    # Цветной вывод
    --color=yes

# Маркеры
markers =
    asyncio: Асинхронные тесты
    slow: Медленные тесты (>5с)
    integration: Интеграционные тесты
    unit: Юнит-тесты

# Минимальный уровень логирования
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %H:%M:%S

# Фильтрация warnings
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
