# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥

–≠—Ç–∞ –≤–µ—Ç–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å–ª—É–≥/–ø—Ä–æ—Ü–µ–¥—É—Ä —Å —Ä–∞–∑–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å–ª—É–≥
- –ö–∞–∂–¥–∞—è —É—Å–ª—É–≥–∞ –∏–º–µ–µ—Ç:
  - –ù–∞–∑–≤–∞–Ω–∏–µ
  - –û–ø–∏—Å–∞–Ω–∏–µ
  - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–≤ –º–∏–Ω—É—Ç–∞—Ö)
  - –¶–µ–Ω—É
  - –¶–≤–µ—Ç (–¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –∞–¥–º–∏–Ω–∫–µ)

### 2. –ì–∏–±–∫–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å–ª—É–≥ –ª—é–±–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (60, 90, 120 –º–∏–Ω—É—Ç –∏ —Ç.–¥.)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- –°–ª–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –µ—Å–ª–∏ –Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è

### 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- –†–∞–±–æ—á–∏–µ —á–∞—Å—ã (–Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –¥–µ–Ω—å

### 4. –°–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º!**

- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—É—é —É—Å–ª—É–≥—É
- –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –µ—Å–ª–∏ —É—Å–ª—É–≥–∞ –æ–¥–Ω–∞
- –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å–ª—É–≥ - –ø–æ—è–≤–ª—è–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–µ—Ç–∫—É

```bash
git checkout feature/multiple-services
```

### 2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞:

```bash
python main.py
```

–í –ª–æ–≥–∞—Ö –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
Applying migration 4: Add services and schedule settings with backward compatibility
‚úÖ Migration 4 applied successfully
‚úÖ Database initialized with migrations
```

### 3. –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
python migrate.py migrate

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
python migrate.py current

# –û—Ç–∫–∞—Ç–∏—Ç—å –∫ –≤–µ—Ä—Å–∏–∏ 3 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
python migrate.py rollback 3
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥ (—á–µ—Ä–µ–∑ –ë–î)

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è —É—Å–ª—É–≥–∞. –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ:

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ bookings.db
sqlite3 bookings.db

-- –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —É—Å–ª—É–≥–∏
INSERT INTO services (name, description, duration_minutes, price, color, display_order)
VALUES 
  ('–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', '–£–≥–ª—É–±–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', 90, '4000 ‚ÇΩ', '#2196F3', 2),
  ('VIP –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–∞—è', 120, '5500 ‚ÇΩ', '#9C27B0', 3);
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

```sql
-- –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
UPDATE schedule_settings 
SET work_hours_start = 8, 
    work_hours_end = 20,
    max_bookings_per_day = 10
WHERE id = 1;
```

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞

### –û–¥–Ω–∞ —É—Å–ª—É–≥–∞
–ï—Å–ª–∏ –≤ –±–∞–∑–µ –æ–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞—è —É—Å–ª—É–≥–∞:
- –ë–æ—Ç —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### –ù–µ—Å–∫–æ–ª—å–∫–æ —É—Å–ª—É–≥
–ï—Å–ª–∏ —É—Å–ª—É–≥ –Ω–µ—Å–∫–æ–ª—å–∫–æ:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è"
2. –ü–æ—è–≤–ª—è–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥–∏:
   ```
   üõ† –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É:
   
   ‚ö° –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è (1 —á, 3000 ‚ÇΩ)
   ‚è± –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è (1 —á 30 –º–∏–Ω, 4000 ‚ÇΩ)
   üïê VIP –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è (2 —á, 5500 ‚ÇΩ)
   ```
3. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ - –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å —É—á–µ—Ç–æ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

### –ü—Ä–∏–º–µ—Ä 1: –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ
```
10:00 - 11:00  –ó–∞–Ω—è—Ç–æ (—É—Å–ª—É–≥–∞ 60 –º–∏–Ω)
10:30 - 12:00  ‚úò –ù–ï–í–û–ó–ú–û–ñ–ù–û (–ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è)
11:00 - 12:00  ‚úî –í–û–ó–ú–û–ñ–ù–û
```

### –ü—Ä–∏–º–µ—Ä 2: –í—ã—Ö–æ–¥ –∑–∞ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
```
–†–∞–±–æ—á–∏–µ —á–∞—Å—ã: 9:00 - 19:00

18:00 - 20:00  ‚úò –ù–ï–í–û–ó–ú–û–ñ–ù–û (–≤—ã—Ö–æ–¥–∏—Ç –∑–∞ 19:00)
17:00 - 19:00  ‚úî –í–û–ó–ú–û–ñ–ù–û
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**services**
```sql
id                   INTEGER PRIMARY KEY
name                 TEXT NOT NULL
description          TEXT
duration_minutes     INTEGER NOT NULL
price                TEXT
color                TEXT DEFAULT '#4CAF50'
is_active            BOOLEAN DEFAULT 1
display_order        INTEGER DEFAULT 0
created_at           TEXT
```

**schedule_settings**
```sql
id                     INTEGER PRIMARY KEY (always 1)
work_hours_start       INTEGER DEFAULT 9
work_hours_end         INTEGER DEFAULT 19
max_bookings_per_day   INTEGER DEFAULT 8
updated_at             TEXT
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ bookings
–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–ª–æ–Ω–∫–∏:
- `service_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —É—Å–ª—É–≥—É
- `duration_minutes` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏

## –ë—É–¥—É—â–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏
- ‚úÖ –ì–∏–±–∫–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### TODO (—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–º–∏—Ç—ã)
- ‚ö†Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∞–º–∏
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- ‚ö†Ô∏è –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –Ω–∏–∫–∏ –≤ –Ω–µ–¥–µ–ª—å–Ω–æ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
- ‚ö†Ô∏è –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —É—Å–ª—É–≥ –ø–æ —Ü–≤–µ—Ç–∞–º

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
python migrate.py current
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Current database version: 4
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
sqlite3 bookings.db "SELECT * FROM services;"
sqlite3 bookings.db "SELECT * FROM schedule_settings;"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python main.py`
2. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
3. –ù–∞–∂–º–∏—Ç–µ "üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è"
4. –ï—Å–ª–∏ —É—Å–ª—É–≥–∞ –æ–¥–Ω–∞ - —Å—Ä–∞–∑—É –∫–∞–ª–µ–Ω–¥–∞—Ä—å
5. –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ - —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é
python migrate.py current

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é
python migrate.py migrate
```

### –ù–µ—Ç —É—Å–ª—É–≥ –≤ –ë–î
```sql
-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ
sqlite3 bookings.db "SELECT COUNT(*) FROM services WHERE is_active=1;"

-- –ï—Å–ª–∏ 0 - –¥–æ–±–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é
INSERT INTO services (name, duration_minutes, price) 
VALUES ('–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', 60, '3000 ‚ÇΩ');
```

## –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ main
git checkout main

# –ò–ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
python migrate.py rollback 3
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: create issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
